(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1211:function(e,n,r){"use strict";r.r(n),r.d(n,"AuthProfile",(function(){return c}));var t,a,o=r(9),i=(r(271),r(38)),s=r(81),l=r(1);r(316);function d(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}class c extends(Object(o.b)(o.a)(i.PageView)){static get styles(){return[s.c,Object(l.b)(t||(t=d(["\n        :host {\n          display: block;\n          background-color: var(--main-section-background-color);\n          overflow-y: auto;\n        }\n      "])))]}get context(){return{title:o.a.t("text.auth profile")}}render(){return Object(l.e)(a||(a=d(["\n      <profile-component></profile-component>\n    "])))}}customElements.define("auth-profile",c)},271:function(e,n,r){"use strict";var t,a,o=r(9),i=r(1);function s(e,n,r,t,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?n(l):Promise.resolve(l).then(t,a)}function l(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}class d extends(Object(o.b)(o.a)(i.a)){static get styles(){return[Object(i.b)(t||(t=l(["\n        * {\n          box-sizing: border-box;\n        }\n        *:focus {\n          outline: none;\n        }\n        select {\n          border: var(--i18n-selector-field-border, var(--input-field-border));\n          border-radius: var(--i18n-selector-field-border-radius,0);\n          background-color: var(--i18n-selector-field-background-color, initial);\n          margin:var(--i18n-selector-field-margin, 0);\n          padding:var(--i18n-selector-field-padding, 0);\n          font: var(--i18n-selector-field-font, var(--input-field-font));\n          font-size: var(--i18n-selector-field-font-size, 15px);\n          width: var(--i18n-selector-field-width, 100%);\n          color: var(--i18n-selector-field-color, initial);\n        }\n        select:focus {\n          border: 1px solid var(--focus-background-color);\n        }\n\n        ::placeholder {\n          font-size: 0.8rem;\n          text-transform: capitalize;\n        }\n      "])))]}static get properties(){return{value:String}}render(){return Object(i.e)(a||(a=l(["\n      <select .value="," @change=",'>\n        <option value="" ?selected=','></option>\n        <option value="ms-MY" ?selected=','>Bahasa Malaysia</option>\n        <option value="en-US" ?selected=','>English</option>\n        <option value="ko-KR" ?selected=','>한국어</option>\n        <option value="zh-CN" ?selected=',">中文</option>\n      </select>\n    "])),this.value,e=>this.onLocaleChanged(e.target.value),!o.a.language,"ms-MY"==o.a.language,"en-US"==o.a.language,"ko-KR"==o.a.language,"zh-CN"==o.a.language)}onLocaleChanged(e){var n,r=this;return(n=function*(){e&&(r.value=e,r.dispatchEvent(new CustomEvent("change",{composed:!0,bubbles:!0,detail:e})))},function(){var e=this,r=arguments;return new Promise((function(t,a){var o=n.apply(e,r);function i(e){s(o,t,a,i,l,"next",e)}function l(e){s(o,t,a,i,l,"throw",e)}i(void 0)}))})()}}customElements.define("i18n-selector",d)},316:function(e,n,r){"use strict";var t,a,o,i,s,l,d,c=r(58),u=r(9),p=(r(271),r(48)),f=r(1);r(38);function b(e,n,r,t,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?n(l):Promise.resolve(l).then(t,a)}function g(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var o=e.apply(n,r);function i(e){b(o,t,a,i,s,"next",e)}function s(e){b(o,t,a,i,s,"throw",e)}i(void 0)}))}}function v(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}class m extends(Object(u.b)(u.a)(f.a)){static get styles(){return[Object(f.b)(t||(t=v(["\n        * {\n          box-sizing: border-box;\n        }\n        *:focus {\n          outline: none;\n        }\n        input {\n          border: var(--change-password-field-border);\n          border-radius: var(--change-password-field-border-radius);\n          margin: var(--change-password-field-margin);\n          padding: var(--change-password-field-padding);\n\n          font: var(--change-password-field-font);\n          width: var(--change-password-field-width);\n        }\n        input:focus {\n          border: 1px solid var(--focus-background-color);\n        }\n\n        ::placeholder {\n          font-size: 0.8rem;\n          text-transform: capitalize;\n        }\n\n        mwc-button {\n          margin: var(--margin-narrow) 0 var(--margin-default) 0;\n        }\n\n        button {\n          background-color: var(--secondary-color, #394e64);\n          margin: 2px 2px 10px 2px;\n          height: var(--button-height, 28px);\n          color: var(--button-color, #fff);\n          font: var(--button-font);\n          border-radius: var(--button-radius, 5px);\n          border: var(--button-border, 1px solid transparent);\n          line-height: 1.5;\n        }\n        button:hover,\n        button:active {\n          background-color: var(--button-active-background-color, #22a6a7);\n          border: var(--button-active-border);\n        }\n      "])))]}render(){return Object(f.e)(a||(a=v(['\n      <form>\n        <div class="field">\n          <input type="password" name="current_pass" placeholder=',' required />\n        </div>\n        <div class="field">\n          <input type="password" name="new_pass" placeholder=',' required />\n        </div>\n        <div class="field">\n          <input type="password" name="confirm_pass" placeholder=',' required />\n        </div>\n\n        <mwc-button raised label="','" @click=',"></mwc-button>\n      </form>\n    "])),u.a.t("text.current password"),u.a.t("text.new password"),u.a.t("text.confirm password"),u.a.t("text.change password"),this.submit.bind(this))}get form(){return this.renderRoot.querySelector("form")}_encodeSha256(e){return g((function*(){var n=(new TextEncoder).encode(e),r=yield crypto.subtle.digest("SHA-256",n);return hexString(r)}))()}submit(){var e=this;return g((function*(){var n=new FormData(e.form),r={};for(var[t,a]of n.entries()){if(!a)return e.showToast(u.a.t("error.value is empty",{value:t}));r[t]=a}if(r.new_pass!==r.confirm_pass)return e.showToast(u.a.t("error.new_password_and_confirm_password_do_not_match"));c.a.changePassword(r),e.form.reset()}))()}showToast(e){document.dispatchEvent(new CustomEvent("notify",{detail:{message:e}}))}}function h(e,n,r,t,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?n(l):Promise.resolve(l).then(t,a)}function w(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}customElements.define("change-password",m);class x extends(Object(u.b)(u.a)(f.a)){static get styles(){return[Object(f.b)(o||(o=w(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          background-color: var(--popup-content-background-color);\n          padding: var(--popup-content-padding);\n        }\n\n        * {\n          box-sizing: border-box;\n        }\n        *:focus {\n          outline: none;\n        }\n\n        label {\n          font: bold 14px var(--theme-font);\n          color: var(--primary-color);\n        }\n\n        input {\n          border: var(--change-password-field-border);\n          border-radius: var(--change-password-field-border-radius);\n          padding: var(--change-password-field-padding);\n\n          font: var(--change-password-field-font);\n          width: var(--change-password-field-width);\n        }\n        input:focus {\n          border: 1px solid var(--focus-background-color);\n        }\n\n        div.field {\n          padding-bottom: 10px;\n        }\n\n        ::placeholder {\n          font-size: 0.8rem;\n          text-transform: capitalize;\n        }\n\n        button {\n          background-color: var(--status-danger-color, red);\n          margin: 2px 2px 10px 2px;\n          height: var(--button-height, 28px);\n          color: var(--button-color, #fff);\n          font: var(--button-font);\n          border-radius: var(--button-radius, 5px);\n          border: var(--button-border, 1px solid transparent);\n          line-height: 1.5;\n        }\n        button:hover,\n        button:active {\n          background-color: var(--button-active-background-color, #22a6a7);\n          border: var(--button-active-border);\n        }\n      "])))]}render(){return Object(f.e)(i||(i=w(['\n      <h1><i18n-msg msgid="label.delete account"></i18n-msg></h1>\n      <span><i18n-msg msgid="text.delete account warning message"></i18n-msg></span>\n      <form @submit=','>\n        <div class="field">\n          <label for="email"><i18n-msg msgid="label.email"></i18n-msg></label>\n          <input id="email" type="email" name="email" required />\n          <label for="password"><i18n-msg msgid="label.password"></i18n-msg></label>\n          <input id="password" type="password" name="password" required />\n        </div>\n\n        <button class="ui button" type="submit"><i18n-msg msgid="label.delete account"></i18n-msg></button>\n      </form>\n    '])),e=>this.submit(e))}submit(e){return(n=function*(){e.preventDefault();var n=e.target,r={};new FormData(n).forEach((e,n)=>{r[n]=e});try{var t=yield c.a.deleteUser(r);Object(p.h)({level:"info",message:t}),c.a.signout()}catch(e){n.reset(),Object(p.h)({level:"error",message:e.message})}},function(){var e=this,r=arguments;return new Promise((function(t,a){var o=n.apply(e,r);function i(e){h(o,t,a,i,s,"next",e)}function s(e){h(o,t,a,i,s,"throw",e)}i(void 0)}))})();var n}}function y(e,n,r,t,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?n(l):Promise.resolve(l).then(t,a)}function j(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var o=e.apply(n,r);function i(e){y(o,t,a,i,s,"next",e)}function s(e){y(o,t,a,i,s,"throw",e)}i(void 0)}))}}function O(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}customElements.define("delete-user-popup",x);class k extends(Object(u.b)(u.a)(f.a)){static get properties(){return{email:String,name:String}}static get styles(){return[Object(f.b)(s||(s=O(["\n        :host {\n          display: block;\n          background-color: var(--main-section-background-color);\n          padding: 15px 0;\n        }\n        .wrap {\n          max-width: var(--profile-wrap-max-width, 400px);\n          margin: auto;\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n        }\n\n        * {\n          box-sizing: border-box;\n        }\n\n        *:focus {\n          outline: none;\n        }\n\n        input {\n          margin: var(--change-password-field-margin);\n          border:var(--input-field-border);\n          padding:var(--input-padding);\n          border-radius:var(--border-radius);\n          font:var(--input-font);\n          width: var(--change-password-field-width);\n        }\n        input:focus {\n          border: 1px solid var(--focus-background-color);\n        }\n\n        .user {\n          background: url(/assets/images/icon-profile.png) center top no-repeat;\n          margin: var(--profile-icon-margin);\n          padding: 180px 20px 20px 20px;\n          color: var(--secondary-color);\n          font: var(--header-bar-title);\n          text-align: center;\n        }\n\n        hr {\n          width: 100%;\n          border: dotted 1px rgba(0, 0, 0, 0.1);\n        }\n\n        .wrap * {\n          grid-column: span 2;\n        }\n\n        label {\n          font: bold 14px var(--theme-font);\n          color: var(--primary-color);\n          text-transform: capitalize;\n          grid-column: 1;\n        }\n\n        .wrap *.inline {\n          grid-column: unset;\n        }\n\n        i18n-selector {\n          --i18n-selector-field-width: var(--auth-input-field-width);\n          --i18n-selector-field-margin:var(--change-password-field-margin);\n          --i18n-selector-field-padding:var(--padding-default);\n          --i18n-selector-field-border-radius:var(--border-radius);\n          margin: var(--change-password-field-margin);\n        }\n\n        [danger] {\n          --mdc-theme-primary : var(--mdc-danger-button-primary-color);\n        }\n      "])))]}firstUpdated(){c.a.on("profile",({credential:e})=>{this.setCredential(e)}),this.setCredential(c.a.credential)}setCredential(e){e?(this.name=e.name,this.email=e.email):(this.name="",this.email="")}render(){return Object(f.e)(l||(l=O(['\n      <div class="wrap">\n        <div class="user">','</div>\n\n        <label for="name"><i18n-msg slot="title" msgid="label.name"></i18n-msg></label>\n        <input id="name" @change='," .value=",' />\n\n        <hr />\n\n        <label for="locale"><i18n-msg slot="title" msgid="label.language"></i18n-msg></label>\n        <i18n-selector id="locale" @change=','></i18n-selector>\n\n        <hr />\n\n        <label for="change-password">\n          <i18n-msg msgid="label.password"></i18n-msg>\n        </label>\n\n        <change-password id="change-password"></change-password>\n        <mwc-button\n          id="delete-user-button"\n          label=',"\n          raised danger\n          @click=","\n        ></mwc-button>\n      </div>\n    "])),this.email||"",e=>this.onNameChanged(e.target.value),this.name||"",e=>this.onLocaleChanged(e.detail),u.a.t("label.delete account"),e=>this.deleteUser())}onNameChanged(e){var n=this;return j((function*(){if(e){var r=n.name,t=n.renderRoot.querySelector("#name");try{var a=yield c.a.updateProfile({name:e});Object(p.h)({level:"info",message:a})}catch(e){t.value=r,Object(p.h)({level:"error",message:e.message})}}}))()}onLocaleChanged(e){var n=this;return j((function*(){if(e){var r=u.a.language,t=n.renderRoot.querySelector("#locale");try{var a=yield c.a.updateProfile({locale:e});u.a.changeLanguage(e),Object(p.h)({level:"info",message:a})}catch(e){t.value=r,Object(p.h)({level:"error",message:e.message})}}}))()}deleteUser(){Object(p.j)(Object(f.e)(d||(d=O([" <delete-user-popup></delete-user-popup> "]))),{title:u.a.t("label.delete account")})}}customElements.define("profile-component",k)}}]);