(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1227:function(n,e,r){"use strict";r.r(e);r(966);var t,a,o=r(38),i=r(140),d=r.n(i),s=r(1),c=r(74);function l(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class u extends s.a{static get styles(){return[Object(s.b)(t||(t=l(["\n        input {\n          border: var(--border-dark-color);\n          border-radius: var(--border-radius);\n          margin: var(--input-margin);\n          padding: var(--input-padding);\n          background-color: transparent;\n          font: var(--input-font);\n\n          flex: 1;\n        }\n        #vendors {\n          display: flex;\n          max-height: 45vh;\n          flex-direction: row;\n          background-color: var(--theme-white-color);\n          margin: 0;\n          padding: 0;\n          border-radius: var(--border-radius);\n          box-shadow: var(--box-shadow);\n          overflow: hidden;\n        }\n        [field-2column] {\n          overflow: auto;\n          flex: 1;\n          background-color: var(--theme-white-color);\n          padding: var(--padding-default);\n          border-radius: var(--border-radius);\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 5px 15px;\n          clear: both;\n          max-width: var(--input-container-max-width);\n        }\n        [field] {\n          display: flex;\n          flex-direction: column;\n          padding-bottom: var(--padding-default);\n        }\n        label {\n          display: flex;\n          flex-direction: column;\n\n          font: var(--label-font);\n          color: var(--label-color);\n          text-transform: var(--label-text-transform);\n        }\n      "])))]}static get properties(){return{partner:Object}}render(){var n=this.partner||{};return Object(s.e)(a||(a=l(['\n      <div id="vendors">\n        <div field-2column>\n          <div field>\n            <label\n              >name\n              <input type="text" name="name" readonly .value=',' />\n            </label>\n          </div>\n\n          <div field>\n            <label\n              >description\n              <input type="text" name="description" readonly .value='," />\n            </label>\n          </div>\n        </div>\n      </div>\n    "])),n.name||"",n.description||"")}}customElements.define("partner-info-card",u);r(49),r(1046);var m,p,v,b,h,g,f,x,y,w,O,j,k,I,C=r(9);function q(n,e,r,t,a,o,i){try{var d=n[o](i),s=d.value}catch(n){return void r(n)}d.done?e(s):Promise.resolve(s).then(t,a)}function z(n){return function(){var e=this,r=arguments;return new Promise((function(t,a){var o=n.apply(e,r);function i(n){q(o,t,a,i,d,"next",n)}function d(n){q(o,t,a,i,d,"throw",n)}i(void 0)}))}}function R(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class T extends(Object(C.b)(C.a)(s.a)){static get styles(){return[Object(s.b)(m||(m=R(["\n        :host {\n          display: flex;\n          flex-direction: column;\n\n          border: 1px solid var(--primary-color);\n          padding: var(--padding-default);\n          font: normal 15px var(--theme-font);\n          color: var(--secondary-color);\n        }\n        [buttons] {\n          margin: 0;\n          padding: var(--padding-default);\n          background-color: rgba(var(--primary-color-rgb), 0.2);\n        }\n        mwc-button {\n          margin-right: var(--padding-narrow);\n        }\n        [danger] {\n          --mdc-theme-primary: var(--mdc-danger-button-primary-color);\n        }\n      "])))]}static get properties(){return{customer:Object,roles:Array,grantingRoles:Array}}get roleSelector(){return this.renderRoot.querySelector("role-selector")}render(){var n=this.roles||[],e=this.grantingRoles||[];return Object(s.e)(p||(p=R(['\n      <role-selector .roles="','" .userRoles="','"></role-selector>\n\n      <div buttons>\n        <mwc-button @click=',' raised label="Save"></mwc-button>\n        <mwc-button @click=',' raised danger label="Terminate Contract"></mwc-button>\n      </div>\n    '])),n,e,this.onSave,this.onTerminateContract)}updated(n){n.has("customer")&&this.refreshRoles()}refreshRoles(){var n=this;return z((function*(){var e,r=yield o.client.query({query:d()(v||(v=R(["\n        query roles($customerId: String!) {\n          roles {\n            items {\n              id\n              name\n              description\n            }\n            total\n          }\n          grantingRoles(customerId: $customerId) {\n            role {\n              id\n              name\n              description\n            }\n          }\n        }\n      "]))),variables:{customerId:n.customer.id},context:Object(o.gqlContext)()});null!==(e=r.errors)&&void 0!==e&&e.length?(n.roles=[],n.grantingRoles=[]):(n.roles=r.data.roles.items,n.grantingRoles=r.data.grantingRoles.map(n=>n.role))}))()}onSave(){var n=this;return z((function*(){var e,r=n.roleSelector.selectedRoles();null!==(e=(yield o.client.mutate({mutation:d()(b||(b=R(["\n        mutation grantRoles($customerId: String!, $roles: [RolePatch]!) {\n          grantRoles(customerId: $customerId, roles: $roles)\n        }\n      "]))),variables:{customerId:n.customer.id,roles:r},context:Object(o.gqlContext)()})).errors)&&void 0!==e&&e.length||n.showToast(C.a.t("text.data_updated_successfully"))}))()}onTerminateContract(){var n=this;return z((function*(){var e;(yield Object(o.CustomAlert)({title:C.a.t("text.are_you_sure"),text:C.a.t("text.are_you_sure_to_terminate_contract"),confirmButton:{text:C.a.t("button.terminate")},cancelButton:{text:C.a.t("button.cancel")}})).value&&(null!==(e=(yield o.client.mutate({mutation:d()(h||(h=R(["\n        mutation terminateContract($partnerName: String!) {\n          terminateContract(partnerName: $partnerName)\n        }\n      "]))),variables:{partnerName:n.customer.name},context:Object(o.gqlContext)()})).errors)&&void 0!==e&&e.length||n.dispatchEvent(new CustomEvent("contractTerminated")))}))()}showToast(n){document.dispatchEvent(new CustomEvent("notify",{detail:{message:n,option:{timer:1e3}}}))}}function N(n,e,r,t,a,o,i){try{var d=n[o](i),s=d.value}catch(n){return void r(n)}d.done?e(s):Promise.resolve(s).then(t,a)}function P(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}window.customElements.define("partner-role-editor",T);class S extends s.a{static get styles(){return[Object(s.b)(g||(g=P(["\n        input {\n          border: var(--border-dark-color);\n          border-radius: var(--border-radius);\n          margin: var(--input-margin);\n          padding: var(--input-padding);\n          min-width: 250px;\n          font: var(--input-font);\n        }\n        mwc-button {\n          margin: var(--input-margin);\n        }\n        @media screen and (max-width: 480px) {\n          div {\n            display: grid;\n          }\n        }\n      "])))]}static get properties(){return{customers:Array}}render(){return Object(s.e)(f||(f=P(['\n      <div>\n        <input id="customer-name" required />\n        <mwc-button @click=',' outlined icon="group_add" label="invite customer"></mwc-button>\n      </div>\n    '])),this.invite.bind(this))}get customerNameInput(){return this.renderRoot.querySelector("input#customer-name")}invite(){var n,e=this;return(n=function*(){try{if(!e.customerNameInput.value)throw new Error(C.a.t("error.value is empty",{value:C.a.t("field.name")}));if(e.customers.find(n=>{var r;return(null===(r=n.name)||void 0===r?void 0:r.toLowerCase())===e.customerNameInput.value.toLowerCase()}))throw new Error(C.a.t("error.x already exists in y",{x:e.customerNameInput.value,y:C.a.t("field.customer")}));if(!(yield Object(o.CustomAlert)({title:C.a.t("text.are_you_sure"),text:C.a.t("text.do_you_want_to_invite_x",{x:C.a.t("label.partner")}),confirmButton:{text:C.a.t("button.confirm")},cancelButton:{text:C.a.t("button.cancel")}})).value)return;var n=e.customerNameInput.value;(yield o.client.mutate({mutation:d()(x||(x=P(["\n          mutation inviteCustomer($customerDomainName: String!) {\n            inviteCustomer(customerDomainName: $customerDomainName)\n          }\n        "]))),variables:{customerDomainName:n},context:Object(o.gqlContext)()})).errors||(e.dispatchEvent(new CustomEvent("invitationCompleted"))||(yield Object(o.CustomAlert)({type:"success",title:C.a.t("text.completed"),confirmButton:{text:C.a.t("button.confirm")}})),e.customerNameInput.value="")}catch(n){document.dispatchEvent(new CustomEvent("notify",{detail:{level:"error",message:n.message}}))}},function(){var e=this,r=arguments;return new Promise((function(t,a){var o=n.apply(e,r);function i(n){N(o,t,a,i,d,"next",n)}function d(n){N(o,t,a,i,d,"throw",n)}i(void 0)}))})()}}function E(n,e,r,t,a,o,i){try{var d=n[o](i),s=d.value}catch(n){return void r(n)}d.done?e(s):Promise.resolve(s).then(t,a)}function A(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}window.customElements.define("invite-customer",S);class _ extends(Object(c.a)(o.store)(o.PageView)){static get styles(){return[Object(s.b)(y||(y=A(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          background-color: var(--main-section-background-color);\n          padding: var(--padding-wide);\n\n          overflow: auto;\n        }\n        h2 {\n          margin: var(--title-margin);\n          font: var(--title-font);\n          color: var(--title-text-color);\n        }\n        .role-editor {\n          flex: 1;\n        }\n      "])))]}static get properties(){return{customers:Array,vendors:Array}}get context(){return{title:"Partners",help:"operato-hub/partners"}}render(){var n={customers:this.customers||[],vendors:this.vendors||[]};return Object(s.e)(w||(w=A(['\n      <h2>partners</h2>\n\n      <quick-find-list\n        .data="','"\n        .contentRenderer="','"\n      >\n      </quick-find-list>\n\n      <invite-customer\n        .customers=','\n        @invitationCompleted="','"\n      ></invite-customer>\n    '])),n,(n,e)=>Object(s.e)(O||(O=A(["\n          ","\n        "])),"customers"===e?Object(s.e)(j||(j=A(['\n                <partner-role-editor\n                  class="role-editor"\n                  .customer="','"\n                  @contractTerminated="','"\n                ></partner-role-editor>\n              '])),n,this.refreshPartners.bind(this)):Object(s.e)(k||(k=A(['<partner-info-card .partner="','"></partner-info-card>'])),n)),this.customers||[],this.refreshPartners.bind(this))}pageUpdated(){this.active&&this.refreshPartners()}refreshPartners(){var n,e=this;return(n=function*(){var n,r=yield o.client.query({query:d()(I||(I=A(["\n        query {\n          customers {\n            id\n            name\n            description\n          }\n          vendors {\n            id\n            name\n            description\n          }\n        }\n      "]))),context:Object(o.gqlContext)()});null!==(n=r.errors)&&void 0!==n&&n.length||(e.customers=r.data.customers,e.vendors=r.data.vendors)},function(){var e=this,r=arguments;return new Promise((function(t,a){var o=n.apply(e,r);function i(n){E(o,t,a,i,d,"next",n)}function d(n){E(o,t,a,i,d,"throw",n)}i(void 0)}))})()}}window.customElements.define("partner-management",_)},966:function(n,e,r){"use strict";var t,a,o,i,d,s,c,l,u,m,p,v,b=r(81),h=r(1);function g(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class f extends h.a{static get styles(){return[Object(h.b)(t||(t=g(["\n        .tabs {\n          display: flex;\n        }\n        .tab {\n          background-color: var(--secondary-background-color);\n          margin-top: var(--margin-default);\n          padding: var(--padding-narrow) var(--padding-wide) 0 var(--padding-wide);\n          border-radius: 9px 9px 0 0;\n          border-right: 1px solid rgba(0, 0, 0, 0.4);\n          text-transform: capitalize;\n          color: var(--theme-white-color);\n          opacity: 0.7;\n          cursor: pointer;\n        }\n        .tab[activate] {\n          background-color: var(--primary-color);\n          box-shadow: 2px -2px 2px 0px rgba(0, 0, 0, 0.15);\n          opacity: 1;\n          font-weight: bold;\n        }\n        .tab span,\n        .tab span[activate] {\n          font-weight: normal;\n          font-size: var(--fontsize-default);\n        }\n        .nav-bar {\n          background-color: var(--theme-white-color);\n          border: 1px solid var(--primary-color);\n          border-radius: 0 var(--border-radius) var(--border-radius) var(--border-radius);\n          margin: 0 0 var(--margin-wide) 0;\n          padding: var(--padding-narrow);\n          transition: opacity ease-in-out 0.3s;\n          opacity: 100%;\n          color: var(--secondary-color);\n          font-size: var(--fontsize-default);\n        }\n        .nav-bar[scrolling] {\n          opacity: 100%;\n          transition: opacity ease-in-out 0.3s;\n        }\n        .nav-bar * {\n          vertical-align: middle;\n        }\n        mwc-icon {\n          --mdc-icon-size: 14px;\n          padding-left: var(--padding-narrow);\n          position: relative;\n          margin-top: -2px;\n        }\n        .nav-bar span {\n          border-right: var(--border-dark-color);\n          border-width: 0 1px;\n          padding: 0 var(--padding-default) 0 var(--padding-narrow);\n          opacity: 0.8;\n          color: var(--secondary-color);\n          font-size: var(--fontsize-small);\n        }\n        .nav-bar span[activate] {\n          font-weight: bold;\n          cursor: pointer;\n          color: var(--secondary-text-color);\n          font-size: var(--fontsize-default);\n        }\n        @media screen and (max-width: 480px) {\n          :host {\n            width: 25px;\n          }\n          .tab {\n            display: flex;\n            flex-direction: column;\n            margin-top: var(--margin-narrow);\n            padding: var(--padding-narrow) var(--padding-default);\n            text-align: center;\n          }\n          .tab span,\n          .tab span[activate] {\n            font-size: var(--fontsize-default);\n            margin-top: -4px;\n          }\n          label,\n          mwc-icon {\n            display: none;\n          }\n          .nav-bar {\n            position: absolute;\n            right: 25px;\n            z-index: 100;\n\n            background-color: rgba(var(--primary-color-rgb), 0.2);\n            border: none;\n            border-radius: 15px;\n            margin-top: initial;\n            padding: var(--padding-narrow) 0;\n            opacity: 0%;\n            text-align: center;\n          }\n          .nav-bar span {\n            display: block;\n            border: none;\n            margin: auto;\n            padding: 2px var(--padding-narrow) 0 var(--padding-narrow);\n            font-size: 12px;\n          }\n        }\n      "])))]}static get properties(){return{scrolling:Boolean,indexes:Array,activeIndexes:Array,data:Object,currentTabKey:String,scrollable:Boolean}}constructor(){super(),this.indexes=[...Array(26).fill(65).map((n,e)=>String.fromCharCode(n+=e)),"#"]}render(){var n=Boolean(this.scrolling),e=this.activeIndexes||[],r=this.data||{},t=Object.keys(r),c=this.currentTabKey||t[0],l=this.scrollable;return Object(h.e)(a||(a=g(["\n      ","\n      ","\n    "])),t.length>1?Object(h.e)(o||(o=g(['\n            <div class="tabs">\n              ',"\n            </div>\n          "])),Object.keys(r).map(n=>{var e=r[n];return Object(h.e)(i||(i=g(['\n                  <div class="tab" ?activate="','" @click="','">\n                    ',"<span>(",")</span>\n                  </div>\n                "])),n===c,()=>this.currentTabKey=n,n,e.length)})):"",l?Object(h.e)(d||(d=g(['\n            <div class="nav-bar" ?scrolling=',">\n              <mwc-icon>anchor</mwc-icon> <label>Quick Find : </label>\n              ","\n            </div>\n          "])),n,this.indexes.map(n=>{var r=e.indexOf(n)>=0;return Object(h.e)(s||(s=g(['\n                  <span\n                    ?activate="','"\n                    class="nav-cursor"\n                    @click=',"\n                    >","</span\n                  >\n                "])),r,e=>{r&&this.onclickNavCursor(n)},n)})):"")}updated(n){n.has("currentTabKey")&&this.dispatchEvent(new CustomEvent("tabChanged",{detail:{currentTabKey:this.currentTabKey},bubbles:!0,composed:!0,cancelable:!0}))}onclickNavCursor(n){this.dispatchEvent(new CustomEvent("navigateTo",{detail:n,composed:!0}))}}function x(n,e,r,t,a,o,i){try{var d=n[o](i),s=d.value}catch(n){return void r(n)}d.done?e(s):Promise.resolve(s).then(t,a)}function y(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}customElements.define("quick-find-navigator",f);class w extends h.a{static get styles(){return[b.c,Object(h.b)(c||(c=y(["\n        :host {\n          display: flex;\n          flex: 1;\n          flex-direction: column;\n          overflow: hidden;\n          max-width: var(--content-container-max-width);\n        }\n        .list-container {\n          flex: 1;\n\n          display: flex;\n          flex-direction: column;\n          background-color: var(--theme-white-color);\n          border-radius: 0 var(--border-radius) var(--border-radius) var(--border-radius);\n          border: var(--border-dark-color);\n          border-width: 0 1px 1px 1px;\n          box-shadow: var(--box-shadow);\n          overflow: auto;\n        }\n        ul {\n          margin: 0;\n          padding: 0;\n          flex: 1;\n          list-style: none;\n        }\n        li {\n          border-bottom: var(--border-dark-color);\n          margin-bottom: -1px;\n          color: var(--secondary-color);\n        }\n        li:nth-child(even) {\n          background-color: rgba(0, 0, 0, 0.025);\n        }\n        li:hover {\n          background-color: rgba(var(--primary-color-rgb), 0.2);\n        }\n        li div {\n          font: bold 16px var(--theme-font);\n        }\n        li div.header {\n          padding: var(--padding-default) var(--padding-wide);\n        }\n        [opened] {\n          border-left: 4px solid var(--google-green-300);\n          border-bottom: 3px solid rgba(0, 0, 0, 0.1);\n        }\n        [opened] .header {\n          background-color: var(--primary-color);\n          box-shadow: var(--box-shadow);\n          color: var(--theme-white-color);\n        }\n        [opened] .header::after {\n          display: block;\n          margin-bottom: -16px;\n          position: relative;\n          margin-top: 9px;\n          content: '';\n          width: 0px;\n          height: 0px;\n          border-left: 7px solid transparent;\n          border-right: 7px solid transparent;\n          border-top: 7px solid var(--primary-color);\n        }\n        li span {\n          display: block;\n          opacity: 0.9;\n          font: normal 14px/18px var(--theme-font);\n        }\n        .header mwc-icon {\n          --mdc-icon-size: var(--fontsize-default);\n          margin-right: var(--padding-narrow);\n        }\n        @media screen and (max-width: 480px) {\n          .list-container {\n            border-radius: 0 var(--border-radius) var(--border-radius) var(--border-radius);\n            border-width: 0 1px 1px 1px;\n          }\n        }\n      "])))]}static get properties(){return{data:Object,nameField:String,currentTabKey:String,list:Array,contentRenderer:Object,floatingDelay:Number,currentOpenedItemIdx:Number,scrollable:Boolean,headerRenderer:Function}}constructor(){super(),this.nameField="name",this.floatingDelay=1,this.headerRenderer=n=>Object(h.e)(l||(l=y(["","<span>","</span>"])),n.name,n.description)}render(){var n,e=this.nameField,r=this.data||{},t=this.currentTabKey||Object.keys(r)[0],a=this.data[t];a=this.sortByNameField(a);var o=this.currentOpenedItemIdx,i=this.computeActiveIndexes(a,e),d=this.scrollable;return Object(h.e)(u||(u=y(['\n      <quick-find-navigator\n        @navigateTo="','"\n        .currentTabKey="','"\n        .data="','"\n        .activeIndexes="','"\n        @tabChanged="','"\n        .scrollable="','"\n      ></quick-find-navigator>\n\n      <div class="list-container" @scroll=',">\n        <ul>\n          ","\n        </ul>\n      </div>\n    "])),this.navigateTo,t,r,i,n=>{this.currentOpenedItemIdx=null,this.currentTabKey=n.detail.currentTabKey},d,this.onscroll.bind(this),null!==(n=a)&&void 0!==n&&n.length?Object(h.e)(m||(m=y(["\n                ","\n              "])),a.map((n,e)=>{var r=o===e;return Object(h.e)(p||(p=y(['\n                    <li\n                      class="list-item"\n                      ?opened="','"\n                      .item="','"\n                      @click="','"\n                    >\n                      <div class="header">\n                        ',"\n                      </div>\n\n                      ","\n                    </li>\n                  "])),r,n,()=>{this.currentOpenedItemIdx===e?this.currentOpenedItemIdx=-1:this.currentOpenedItemIdx=e},r&&"function"==typeof this.openHeaderRenderer?this.openHeaderRenderer(n):this.headerRenderer(n),r&&"function"==typeof this.contentRenderer?Object(h.e)(v||(v=y(['<div @click="','">\n                            ',"\n                          </div>"])),n=>n.stopPropagation(),this.contentRenderer(n,this.currentTabKey)):"")})):"")}get listItems(){return Array.from(this.renderRoot.querySelectorAll(".list-container li.list-item"))}updated(n){var e,r=this;return(e=function*(){(n.has("data")||n.has("currentTabKey"))&&(yield r.updateComplete,r.scrollable=r.computeScrollable())},function(){var n=this,r=arguments;return new Promise((function(t,a){var o=e.apply(n,r);function i(n){x(o,t,a,i,d,"next",n)}function d(n){x(o,t,a,i,d,"throw",n)}i(void 0)}))})()}get quickFindNavigator(){return this.renderRoot.querySelector("quick-find-navigator")}computeActiveIndexes(n,e){return Array.from(new Set(n.map(n=>n[e][0].toUpperCase())))}computeScrollable(){var n=this.renderRoot.querySelector("ul");return n.clientHeight<n.scrollHeight}navigateTo(n){var e=this.nameField,r=n.detail.toLowerCase(),t=this.sortByNameField(this.data[this.currentTabKey]).findIndex(n=>0===n[e].toLowerCase().indexOf(r)),a=this.renderRoot.querySelector("ul :nth-child(".concat(t+1,")"));null==a||a.scrollIntoView()}onscroll(){this.quickFindNavigator.scrolling||(this.quickFindNavigator.scrolling=!0),null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.quickFindNavigator.scrolling=!1},1e3*this.floatingDelay)}sortByNameField(n){var e=this.nameField;return n.sort((n,r)=>n[e]>r[e]?1:n[e]<r[e]?-1:0)}close(){this.currentOpenedItemIdx=-1}openByKey(n,e="id"){this.currentOpenedItemIdx=this.listItems.findIndex(r=>r.item[e]===n)}}customElements.define("quick-find-list",w)}}]);