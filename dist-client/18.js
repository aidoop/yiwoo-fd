(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1217:function(n,e,t){"use strict";t.r(e);var i,r,o,a,d,c,l,s,u,p,f,v=t(1),b=t(942),g=t(140),h=t.n(g),m=t(963),y=t.n(m),w=t(74),x=t(38),k=t(31);function O(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?O(Object(t),!0).forEach((function(e){T(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function T(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P(n,e,t,i,r,o,a){try{var d=n[o](a),c=d.value}catch(n){return void t(n)}d.done?e(c):Promise.resolve(c).then(i,r)}function S(n){return function(){var e=this,t=arguments;return new Promise((function(i,r){var o=n.apply(e,t);function a(n){P(o,i,r,a,d,"next",n)}function d(n){P(o,i,r,a,d,"throw",n)}a(void 0)}))}}function I(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function A(n){var e,t;function i(e,t){try{var o=n[e](t),a=o.value,d=a instanceof _;Promise.resolve(d?a.wrapped:a).then((function(n){d?i("return"===e?"return":"next",n):r(o.done?"return":"normal",n)}),(function(n){i("throw",n)}))}catch(n){r("throw",n)}}function r(n,r){switch(n){case"return":e.resolve({value:r,done:!0});break;case"throw":e.reject(r);break;default:e.resolve({value:r,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(n,r){return new Promise((function(o,a){var d={key:n,arg:r,resolve:o,reject:a,next:null};t?t=t.next=d:(e=t=d,i(n,r))}))},"function"!=typeof n.return&&(this.return=void 0)}function _(n){this.wrapped=n}"function"==typeof Symbol&&Symbol.asyncIterator&&(A.prototype[Symbol.asyncIterator]=function(){return this}),A.prototype.next=function(n){return this._invoke("next",n)},A.prototype.throw=function(n){return this._invoke("throw",n)},A.prototype.return=function(n){return this._invoke("return",n)};class D extends(Object(w.a)(x.store)(x.PageView)){static get styles(){return[Object(v.b)(i||(i=I(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          overflow-y: auto;\n\n          position: relative;\n\n          background-color: var(--main-section-background-color);\n          padding: var(--padding-wide);\n        }\n        h2 {\n          margin: var(--title-margin);\n          font: var(--title-font);\n          color: var(--title-text-color);\n        }\n        [page-description] {\n          margin: var(--page-description-margin);\n          font: var(--page-description-font);\n          color: var(--page-description-color);\n        }\n        [icon] {\n          position: absolute;\n          top: 10px;\n          right: 10px;\n\n          max-width: 80px;\n        }\n        [icon] img {\n          max-width: 100%;\n          max-height: 100%;\n        }\n\n        label {\n          font: var(--label-font);\n          color: var(--label-color);\n          text-transform: var(--label-text-transform);\n        }\n        input {\n          border: var(--border-dark-color);\n          border-radius: var(--border-radius);\n          margin: var(--input-margin);\n          padding: var(--input-padding);\n          font: var(--input-font);\n\n          flex: 1;\n        }\n        select:focus,\n        input:focus,\n        button {\n          outline: none;\n        }\n        form {\n          max-width: var(--content-container-max-width);\n        }\n        [fieldset-container] {\n          background-color: var(--theme-white-color);\n          margin: var(--margin-wide) 0 var(--margin-default) 0;\n          padding: var(--padding-default);\n          border-radius: var(--border-radius);\n          box-shadow: var(--box-shadow);\n        }\n        [fieldset-container] fieldset {\n          margin: 0;\n          margin-top: -15px;\n        }\n        fieldset {\n          border-radius: var(--border-radius);\n          border: var(--border-dark-color);\n          margin: var(--fieldset-margin);\n          padding: var(--fieldset-padding);\n        }\n        legend {\n          padding: var(--legend-padding);\n          font-weight: bold;\n          color: var(--legend-color);\n        }\n        [field-2column] {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          grid-gap: 15px;\n        }\n        [field] {\n          display: flex;\n          flex-direction: column;\n          position: relative;\n        }\n        [grid-span] {\n          grid-column: span 2;\n        }\n        button,\n        [button-in-field] {\n          background-color: var(--button-background-color);\n          border: var(--button-border);\n          border-radius: var(--button-border-radius);\n          padding: var(--button-padding);\n          color: var(--button-color);\n          font: var(--button-font);\n          text-transform: var(--button-text-transform);\n\n          margin: var(--margin-default) 0 var(--margin-default) var(--margin-default);\n          float: right;\n          text-decoration: none;\n        }\n        button:hover {\n          border: var(--button-activ-border);\n          box-shadow: var(--button-active-box-shadow);\n        }\n        [button-in-field] {\n          border-radius: 0 var(--button-border-radius) var(--button-border-radius) 0;\n          position: absolute;\n          top: 11px;\n          right: 0;\n          max-height: 36px;\n        }\n        [input-hint] {\n          font: var(--input-hint-font);\n          color: var(--input-hint-color);\n        }\n        @media screen and (max-width: 480px) {\n          [field] {\n            grid-column: span 2;\n          }\n        }\n      "])))]}static get properties(){return{appbinding:Object,accessToken:String,_refreshTokenInfo:Object,_accessTokenInfo:Object}}get context(){return{title:{icon:"link",text:this.appbinding.name}}}render(){var n,e,t,i=this.appbinding||{},u=(null===(n=this.appbinding)||void 0===n?void 0:n.application)||{},p=null===(e=this._refreshTokenInfo)||void 0===e?void 0:e.exp,f=null===(t=this._accessTokenInfo)||void 0===t?void 0:t.exp;return Object(v.e)(r||(r=I(["\n      <div>\n        <h2><mwc-icon>link</mwc-icon>&nbsp;","</h2>\n        <p page-description>","</p>\n      </div>\n\n      ",'\n\n      <form>\n        <div fieldset-container>\n          <fieldset>\n            <legend>application</legend>\n            <div field-2column>\n              <div field grid-span>\n                <label for="app-name">app name</label>\n                <input id="app-name" type="text" .value=',' readonly />\n              </div>\n\n              <div field grid-span>\n                <label for="app-description">description</label>\n                <input id="app-description" type="text" .value=',' readonly />\n              </div>\n\n              <div field>\n                <label for="contact-email">contact email</label>\n                <input id="contact-email" type="text" .value=',' readonly />\n              </div>\n            </div>\n          </fieldset>\n        </div>\n\n        <div fieldset-container>\n          <fieldset>\n            <legend>binding</legend>\n            <div field-2column>\n              <div field grid-span>\n                <label for="id">id</label>\n                <input id="id" type="text" .value=',' readonly />\n              </div>\n\n              <div field grid-span>\n                <label for="name">name</label>\n                <input id="name" type="text" .value=',' readonly />\n              </div>\n\n              <div field>\n                <label for="status">status</label>\n                <input id="status" type="text" .value=',' readonly />\n              </div>\n\n              <div field>\n                <label for="scope">scope</label>\n                <input id="scope" type="text" .value=',' readonly />\n              </div>\n            </div>\n          </fieldset>\n        </div>\n\n        <div fieldset-container>\n          <fieldset>\n            <legend>binding credential</legend>\n            <div field-2column>\n              <div field grid-span>\n                <label for="access-token">access token</label>\n                <input id="access-token" type="text" .value='," readonly />\n                <button button-in-field clipboard-copy @click=",">copy</button>\n                ",'\n              </div>\n\n              <div field grid-span>\n                <label for="refresh-token">refresh token</label>\n                <input id="refresh-token" type="text" .value='," readonly />\n                <button button-in-field clipboard-copy @click=",">copy</button>\n                ","\n              </div>\n            </div>\n          </fieldset>\n        </div>\n\n        <button @click=",">delete this application binding</button>\n        <button @click=",">renew access token</button>\n      </form>\n    "])),u.name,u.description,u.icon?Object(v.e)(o||(o=I(["\n            <div icon>\n              <img src="," />\n            </div>\n          "])),u.icon):Object(v.e)(a||(a=I([""]))),u.name,u.description,u.email,i.id,i.email,i.status,i.scope,this.accessToken||"",n=>n.preventDefault(),f?Object(v.e)(d||(d=I(["<div input-hint>\n                      expired in "," :\n                      ","\n                    </div>"])),Date(f).toLocaleString(),Object(b.a)(this.expTimer(f))):Object(v.e)(c||(c=I([""]))),i.refreshToken||"",n=>n.preventDefault(),p?Object(v.e)(l||(l=I(["<div input-hint>\n                      expired in "," :\n                      ","\n                    </div>"])),Date(p).toLocaleString(),Object(b.a)(this.expTimer(p))):Object(v.e)(s||(s=I([""]))),this.deleteAppBinding.bind(this),this.renewApplicationAccessToken.bind(this))}expTimer(n){var e,t=this;return(e=function*(){for(var e;t.active;){var i=Math.floor(Number(n)-Date.now()/1e3),r=Math.floor(i/86400);i-=86400*r;var o=Math.floor(i/3600);i-=3600*o;var a=Math.floor(i/60),d=i-60*a;yield"".concat(r," days ").concat(o," hours ").concat(a," mins ").concat(d," seconds remain"),yield(e=Object(k.m)(1e3),new _(e))}},function(){return new A(e.apply(this,arguments))})()}firstUpdated(){var n=this.renderRoot.querySelectorAll("[clipboard-copy]");this.clipboard=new y.a(n,{target:n=>n.parentElement.querySelector("input")})}updated(n){if(n.has("appbinding")){var{refreshToken:e}=this.appbinding||{};this._refreshTokenInfo=e?Object(k.k)(e):{}}n.has("accessToken")&&(this._accessTokenInfo=this.accessToken?Object(k.k)(this.accessToken):{})}pageUpdated(n,e,t){var i=this;return S((function*(){i.active&&(yield i.fetchAppBinding())}))()}fetchAppBinding(){var n=this;return S((function*(){var e=yield x.client.query({query:h()(u||(u=I(["\n        query($id: String!) {\n          appBinding(id: $id) {\n            id\n            name\n            description\n            email\n            scope\n            status\n            application {\n              id\n              name\n              description\n              email\n              icon\n            }\n            refreshToken\n          }\n        }\n      "]))),variables:{id:n.lifecycle.resourceId}});n.appbinding=e.data.appBinding}))()}deleteAppBinding(n){var e=this;return S((function*(){n.preventDefault();var t=e.lifecycle.resourceId;(yield x.client.mutate({mutation:h()(p||(p=I(["\n        mutation($id: String!) {\n          deleteAppBinding(id: $id)\n        }\n      "]))),variables:{id:t}})).data.deleteAppBinding?(console.log("delete sucess"),Object(x.navigate)("app-bindings")):console.error("delete fail")}))()}renewApplicationAccessToken(n){var e=this;return S((function*(){n.preventDefault();var t=e.lifecycle.resourceId,i=yield x.client.mutate({mutation:h()(f||(f=I(["\n        mutation($id: String!) {\n          renewApplicationAccessToken(id: $id) {\n            accessToken\n            refreshToken\n          }\n        }\n      "]))),variables:{id:t}});if(i.errors)console.error("renew application access token fail");else{var{accessToken:r,refreshToken:o}=i.data.renewApplicationAccessToken;e.accessToken=r,e.appbinding=j(j({},e.appbinding),{},{refreshToken:o})}}))()}}window.customElements.define("app-binding-page",D)},942:function(n,e,t){"use strict";t.d(e,"a",(function(){return a}));var i=t(5);function r(n,e,t,i,r,o,a){try{var d=n[o](a),c=d.value}catch(n){return void t(n)}d.done?e(c):Promise.resolve(c).then(i,r)}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
var o=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(t){e[t]=n[t]&&function(e){return new Promise((function(i,r){(function(n,e,t,i){Promise.resolve(i).then((function(e){n({value:e,done:t})}),e)})(i,r,(e=n[t](e)).done,e.value)}))}}},a=Object(i.f)((n,e)=>function(){var t,a=(t=function*(t){var r,a;if(!(t instanceof i.d))throw new Error("asyncReplace can only be used in text bindings");if(n!==t.value){var d=new i.d(t.options);t.value=n;var c=0;try{for(var l,s=o(n);!(l=yield s.next()).done;){var u=l.value;if(t.value!==n)break;0===c&&(t.clear(),d.appendIntoPart(t)),void 0!==e&&(u=e(u,c)),d.setValue(u),d.commit(),c++}}catch(n){r={error:n}}finally{try{l&&!l.done&&(a=s.return)&&(yield a.call(s))}finally{if(r)throw r.error}}}},function(){var n=this,e=arguments;return new Promise((function(i,o){var a=t.apply(n,e);function d(n){r(a,i,o,d,c,"next",n)}function c(n){r(a,i,o,d,c,"throw",n)}d(void 0)}))});return function(n){return a.apply(this,arguments)}}())}}]);