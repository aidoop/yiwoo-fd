(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1225:function(e,n,t){"use strict";t.r(n);t(966);var r,a,i,o=t(38),s=t(9),l=t(140),d=t.n(l),c=t(1),u=t(48),m=t(74);t(89);function p(e,n,t,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,a)}function v(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}class b extends(Object(s.b)(s.a)(c.a)){static get properties(){return{user:Object}}static get styles(){return[Object(c.b)(r||(r=v(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          background-color: var(--main-section-background-color);\n          padding: var(--padding-wide);\n          overflow: auto;\n        }\n        .container {\n          display: flex;\n          flex-direction: column;\n          flex: 1;\n        }\n        input {\n          border: var(--border-dark-color);\n          border-radius: var(--border-radius);\n          margin: var(--input-margin);\n          padding: var(--input-padding);\n          min-width: 250px;\n          font: var(--input-font);\n        }\n        .input-container {\n          margin: auto;\n          display: flex;\n        }\n        .input-container mwc-button {\n          margin: auto 0px auto var(--padding-wide);\n        }\n      "])))]}render(){return Object(c.e)(a||(a=v(['\n      <div class="container">\n        <div>Please enter the email of the user you want to transfer owner</div>\n        <div class="input-container">\n          <input name="email" />\n          <mwc-button raised @click=',">","</mwc-button>\n        </div>\n      </div>\n    "])),this.transferOwnership,s.a.t("button.confirm"))}get emailInput(){return this.renderRoot.querySelector("input[name=email]")}transferOwnership(){var e,n=this;return(e=function*(){var e;n.doubleCheckEmail()?(yield Object(o.CustomAlert)({title:s.a.t("text.are_you_sure"),text:s.a.t("text.are_you_sure_to_transfer_owner"),confirmButton:{text:s.a.t("button.confirm")},cancelButton:{text:s.a.t("button.cancel")}})).value?null!==(e=(yield o.client.mutate({mutation:d()(i||(i=v(["\n        mutation transferOwner($email: String!) {\n          transferOwner(email: $email)\n        }\n      "]))),variables:{email:n.user.email},context:Object(o.gqlContext)()})).errors)&&void 0!==e&&e.length||(yield Object(o.CustomAlert)({type:"success",title:s.a.t("text.completed"),text:s.a.t("text.transfer_completed"),confirmButton:{text:s.a.t("button.confirm")}}),history.back(),n.dispatchEvent(new CustomEvent("ownershipTransferred",{bubbles:!0,composed:!0}))):history.back():yield Object(o.CustomAlert)({title:s.a.t("title.invalid input"),text:s.a.t("text.email is not matched"),confirmButton:{text:s.a.t("button.confirm")}})},function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){p(i,r,a,o,s,"next",e)}function s(e){p(i,r,a,o,s,"throw",e)}o(void 0)}))})()}doubleCheckEmail(){var e;return(null===(e=this.emailInput)||void 0===e?void 0:e.value)===this.user.email}}window.customElements.define("ownership-transfer-popup",b);var h,f,g,x,w,y,O,j,R,k,C,q,I,T,_,U,P,E,z,A,B,S,$,D,K,F,N,H,L,V,J,Q,G,M,W,X;t(598);function Y(e,n,t,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,a)}function Z(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){Y(i,r,a,o,s,"next",e)}function s(e){Y(i,r,a,o,s,"throw",e)}o(void 0)}))}}function ee(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}class ne extends(Object(m.a)(o.store)(c.a)){static get styles(){return[Object(c.b)(h||(h=ee(["\n        :host {\n          display: flex;\n          flex-direction: column;\n\n          border: 1px solid var(--primary-color);\n          font: normal 15px var(--theme-font);\n          color: var(--secondary-color);\n        }\n        ul {\n          flex: 1;\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          column-gap: 20px;\n\n          overflow: auto;\n          margin: 0;\n          padding: var(--padding-default);\n          list-style: none;\n          border: 1px dashed rgba(0, 0, 0, 0.1);\n          border-width: 1px 0;\n        }\n        input[readonly] {\n          border: none;\n          background-color: transparent;\n          color: var(--secondary-color);\n          font: var(--input-font);\n        }\n        li {\n          padding: var(--padding-narrow);\n        }\n        [detail] {\n          background-color: rgba(var(--primary-color-rgb), 0.05);\n        }\n        [detail] mwc-icon {\n          vertical-align: middle;\n          --mdc-icon-size: var(--fontsize-default);\n          color: var(--primary-color);\n        }\n        [detail] li {\n          display: flex;\n        }\n        [detail] li input {\n          flex: 1;\n        }\n        [buttons] {\n          margin: 0;\n          padding: var(--padding-default);\n          background-color: rgba(var(--primary-color-rgb), 0.2);\n        }\n        mwc-button {\n          margin-right: var(--padding-narrow);\n        }\n        [danger] {\n          --mdc-theme-primary: var(--mdc-danger-button-primary-color);\n        }\n        [outlined] {\n          background-color: var(--theme-white-color);\n        }\n\n        @media screen and (max-width: 480px) {\n          ul {\n            grid-template-columns: 1fr;\n          }\n        }\n      "])))]}static get properties(){return{user:Object,domainRoles:Array,grantedRoles:Object,userRoles:Array,isSuperOwner:Boolean,isDomainOwner:Boolean,activate:Boolean,domainOwner:Object}}render(){var e=this.user||{},n=this.domainRoles||[],t=this.grantedRoles||{},r="roles";return null!=n&&n.length&&(r=n[0].domain.name),Object(c.e)(f||(f=ee(["\n      ","\n\n      <div buttons>\n        ","\n        ","\n        ","\n        ","\n      </div>\n    "])),this.activate?Object(c.e)(g||(g=ee(["\n            <ul detail>\n              ",'\n            </ul>\n\n            <role-selector\n              .roleCategory="','"\n              .user="','"\n              .roles="','"\n              .userRoles="','"\n            ></role-selector>\n\n            ',"\n          "])),"user"===e.userType?Object(c.e)(x||(x=ee(["\n                    <li>\n                      <span>\n                        <mwc-icon>email</mwc-icon>\n                        ","\n                      </span>\n                    </li>\n                  "])),e.email):"",r,this.user,n,this.userRoles,Object.keys(t).map(e=>Object(c.e)(w||(w=ee(['\n                <role-selector\n                  .roleCategory="','"\n                  .user="','"\n                  .roles="','"\n                  .userRoles="','"\n                >\n                </role-selector>\n              '])),e,this.user,this.grantedRoles[e],this.userRoles))):"",this.isRoleEditable()?Object(c.e)(y||(y=ee([" <mwc-button\n              raised\n              @click=",'\n              label="Save"\n            ></mwc-button>'])),()=>{var{availableRoles:n,selectedRoles:t}=Array.from(this.renderRoot.querySelectorAll("role-selector")).reduce((e,n)=>(e.availableRoles=e.availableRoles.concat(n.roles.map(e=>(delete e.domain,e))),e.selectedRoles=e.selectedRoles.concat(n.selectedRoles().map(e=>(delete e.domain,e))),e),{availableRoles:[],selectedRoles:[]});this.onSave(e,n,t)}):"","user"===e.userType?Object(c.e)(O||(O=ee(["\n              ","\n              ","\n            "])),this.isTransferable(e)?Object(c.e)(j||(j=ee(["\n                    <mwc-button raised danger @click=",' label="Transfer Owner"></mwc-button>\n                  '])),()=>this.onTransfer(e)):"",this.isPasswordResettable(e)?Object(c.e)(R||(R=ee(['<mwc-button\n                    raised\n                    danger\n                    @click="','"\n                    label="reset password"\n                  ></mwc-button>'])),()=>this.onResetPassword(e)):""):"",this.isRemovable(e)?Object(c.e)(k||(k=ee(['\n              <mwc-button\n                raised\n                danger\n                label="delete user"\n                @click=','\n                label="reset password"\n              ></mwc-button>\n            '])),()=>this.onDelete(e)):"",this.activate?"":Object(c.e)(C||(C=ee(['<mwc-button raised label="activate" @click=',"></mwc-button>"])),()=>this.onActivate(e)))}isRemovable(e){return this.isDomainOwner&&e.email!==this.me.email&&!e.owner}isTransferable(e){return this.isDomainOwner&&e.email!==this.me.email&&!e.owner}isRoleEditable(){var e;return this.activate&&((null===(e=this.domainRoles)||void 0===e?void 0:e.length)||Object.keys(this.grantedRoles||{}).length)}isPasswordResettable(e){return(this.isSuperOwner||this.isDomainOwner)&&e.email!==this.me.email}updated(e){var n=this;return Z((function*(){var t;e.has("user")&&(n.fetchAvailableRoles(),null!==(t=n.user)&&void 0!==t&&t.email?n.userRoles=yield n.fetchRolesOnUser(n.user.email):n.userRoles=[])}))()}fetchRolesOnUser(e){return Z((function*(){var n,t=yield o.client.query({query:d()(q||(q=ee(["\n        query($email: String!) {\n          user(email: $email) {\n            id\n            name\n            email\n            roles {\n              id\n              name\n              description\n              domain {\n                id\n              }\n            }\n          }\n        }\n      "]))),variables:{email:e},context:Object(o.gqlContext)()});if(!t.errors)return(null===(n=t.data.user)||void 0===n?void 0:n.roles)||[]}))()}fetchAvailableRoles(){var e=this;return Z((function*(){var n,t=yield o.client.query({query:d()(I||(I=ee(["\n        query {\n          roles {\n            items {\n              id\n              domain {\n                name\n              }\n              name\n              description\n            }\n            total\n          }\n          grantedRoles {\n            id\n            role {\n              id\n              name\n              description\n              domain {\n                name\n              }\n            }\n          }\n        }\n      "]))),context:Object(o.gqlContext)()});null!==(n=t.errors)&&void 0!==n&&n.length?(e.domainRoles=[],e.grantedRoles=[]):(e.domainRoles=t.data.roles.items||[],e.grantedRoles=t.data.grantedRoles.reduce((e,n)=>{var{role:t}=n,{domain:r}=t;return e[r.name]?e[r.name].push(t):e[r.name]=[t],e},{}))}))()}onSave(e,n,t){var r=this;return Z((function*(){null!=e&&e.id&&((yield o.client.mutate({mutation:d()(T||(T=ee(["\n          mutation($userId: String!, $availableRoles: [RolePatch]!, $selectedRoles: [RolePatch]!) {\n            updateUserRoles(userId: $userId, availableRoles: $availableRoles, selectedRoles: $selectedRoles) {\n              id\n              name\n              roles {\n                id\n                description\n              }\n            }\n          }\n        "]))),variables:{userId:e.id,availableRoles:n,selectedRoles:t},context:Object(o.gqlContext)()})).errors||(r.showToast(s.a.t("text.data_updated_successfully")),r.dispatchUserUpdated()))}))()}onActivate(e){var n=this;return Z((function*(){(yield Object(o.CustomAlert)({title:s.a.t("text.are_you_sure"),text:s.a.t("text.are_you_sure_to_x_user",{x:s.a.t("button.activate")}),confirmButton:{text:s.a.t("button.activate")},cancelButton:{text:s.a.t("button.cancel")}})).value&&((yield o.client.mutate({mutation:d()(_||(_=ee(["\n        mutation updateUser($email: String!, $patch: UserPatch!) {\n          updateUser(email: $email, patch: $patch) {\n            id\n            name\n            email\n            userType\n            status\n            owner\n          }\n        }\n      "]))),variables:{email:e.email,patch:{status:"activated"}},context:Object(o.gqlContext)()})).errors||(yield Object(o.CustomAlert)({title:s.a.t("text.completed"),confirmButton:{text:s.a.t("button.confirm")}}),n.dispatchUserUpdated()))}))()}onDelete(e){var n=this;return Z((function*(){(yield Object(o.CustomAlert)({title:s.a.t("text.are_you_sure"),text:s.a.t("text.are_you_sure_to_x_user",{x:s.a.t("button.deactivate")}),confirmButton:{text:s.a.t("button.deactivate")},cancelButton:{text:s.a.t("button.cancel")}})).value&&(e.owner?yield Object(o.CustomAlert)({type:"warning",title:s.a.t("text.cannot_delete"),text:s.a.t("text.x_cannot_delete",{x:s.a.t("label.owner")}),confirmButton:{text:s.a.t("button.confirm")}}):(yield o.client.mutate({mutation:d()(U||(U=ee(["\n        mutation deleteDomaineUser($email: String!) {\n          deleteDomainUser(email: $email)\n        }\n      "]))),variables:{email:e.email},context:Object(o.gqlContext)()})).errors||(yield Object(o.CustomAlert)({type:"success",title:s.a.t("text.completed"),confirmButton:{text:s.a.t("button.confirm")}}),n.dispatchUserUpdated()))}))()}onTransfer(e){var n=this;return Z((function*(){Object(u.j)(Object(c.e)(P||(P=ee(["\n        <ownership-transfer-popup\n          .user=",'\n          @ownershipTransferred="','"\n        ></ownership-transfer-popup>\n      '])),e,n.dispatchOwnershipTransferred.bind(n)),{size:"small",title:"".concat(s.a.t("title.owner_transfer"))})}))()}onResetPassword(e){return Z((function*(){(yield Object(o.CustomAlert)({title:s.a.t("text.are_you_sure"),text:s.a.t("text.are_you_sure_to_reset_password"),confirmButton:{text:s.a.t("button.confirm")},cancelButton:{text:s.a.t("button.cancel")}})).value&&((yield o.client.mutate({mutation:d()(E||(E=ee(["\n        mutation resetPasswordToDefault($userId: String!) {\n          resetPasswordToDefault(userId: $userId)\n        }\n      "]))),variables:{userId:e.id}})).errors||(yield Object(o.CustomAlert)({type:"success",title:s.a.t("text.completed"),text:s.a.t("text.reset_successfully"),confirmBUtton:{text:s.a.t("button.confirm")}})))}))()}dispatchUserUpdated(){this.dispatchEvent(new CustomEvent("userUpdated"))}dispatchOwnershipTransferred(){this.dispatchEvent(new CustomEvent("ownershipTransferred"))}showToast(e){document.dispatchEvent(new CustomEvent("notify",{detail:{message:e}}))}stateChanged(e){var n;this.me=(null===(n=e.auth)||void 0===n?void 0:n.user)||{},this.isSuperOwner=this.me.super||!1,this.isDomainOwner=this.me.email===this.domainOwner.email||!1}}function te(e,n,t,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,a)}function re(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){te(i,r,a,o,s,"next",e)}function s(e){te(i,r,a,o,s,"throw",e)}o(void 0)}))}}function ae(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}customElements.define("user-role-editor",ne);class ie extends c.a{static get styles(){return Object(c.b)(z||(z=ae(["\n      input {\n        border: var(--border-dark-color);\n        border-radius: var(--border-radius);\n        margin: var(--input-margin);\n        padding: var(--input-padding);\n        min-width: 250px;\n        font: var(--input-font);\n      }\n      mwc-button {\n        margin: var(--input-margin);\n      }\n      @media screen and (max-width: 480px) {\n        div {\n          display: grid;\n        }\n      }\n    "])))}static get properties(){return{}}render(){return Object(c.e)(A||(A=ae(['\n      <div>\n        <input name="email" type="email" required name="invite-email" />\n        <mwc-button @click=',' outlined icon="group_add" label="invite user"></mwc-button>\n      </div>\n    '])),this.invite.bind(this))}get emailInput(){return this.renderRoot.querySelector("input[name=email]")}invite(){var e=this;return re((function*(){try{if(!e.emailInput.checkValidity())throw new Error(s.a.t("error.not valid pattern of type",{type:"e-mail"}));if(!(yield Object(o.CustomAlert)({title:s.a.t("text.are_you_sure"),text:s.a.t("text.do_you_want_to_invite_x",{x:s.a.t("label.user")}),confirmButton:{text:s.a.t("button.confirm")},cancelButton:{text:s.a.t("button.cancel")}})).value)return;yield e.inviteUser(e.emailInput.value),e.dispatchEvent(new CustomEvent("invitationCompleted"))}catch(e){document.dispatchEvent(new CustomEvent("notify",{detail:{level:"error",message:e.message}}))}}))()}inviteUser(e){var n=this;return re((function*(){(yield o.client.mutate({mutation:d()(B||(B=ae(["\n        mutation inviteUser($email: String!) {\n          inviteUser(email: $email)\n        }\n      "]))),variables:{email:e},context:Object(o.gqlContext)()})).errors||(yield Object(o.CustomAlert)({title:s.a.t("text.completed"),confirmButton:{text:s.a.t("button.confirm")}}),n.emailInput.value="")}))()}}function oe(e,n,t,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,a)}function se(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}window.customElements.define("invite-user",ie);class le extends c.a{static get styles(){return Object(c.b)(S||(S=se(["\n      [field-2column] {\n        background-color: var(--theme-white-color);\n        margin: var(--margin-wide) 0;\n        padding: var(--padding-wide);\n        border-radius: var(--border-radius);\n        box-shadow: var(--box-shadow);\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 5px 15px;\n        clear: both;\n        max-width: var(--input-container-max-width);\n      }\n      [field] {\n        display: flex;\n        flex-direction: column;\n        padding-bottom: var(--padding-default);\n      }\n      [grid-span] {\n        grid-column: span 2;\n      }\n\n      input {\n        border: var(--border-dark-color);\n        border-radius: var(--border-radius);\n        margin: var(--input-margin);\n        padding: var(--input-padding);\n        min-width: 250px;\n        font: var(--input-font);\n      }\n      label {\n        display: flex;\n        flex-direction: column;\n\n        font: var(--label-font);\n        color: var(--label-color);\n        text-transform: var(--label-text-transform);\n      }\n      mwc-button {\n        margin: var(--input-margin);\n      }\n      @media screen and (max-width: 480px) {\n        div {\n          display: grid;\n        }\n        [field] {\n          grid-column: span 2;\n        }\n      }\n    "])))}static get properties(){return{}}render(){return Object(c.e)($||($=se(['\n      <div field-2column>\n        <div field>\n          <label\n            >user name\n            <input name="name" type="text" required />\n          </label>\n        </div>\n        <div field>\n          <label\n            >user email\n            <input name="email" type="email" required />\n          </label>\n        </div>\n\n        <div>\n          <mwc-button @click=',' outlined label="create"></mwc-button>\n        </div>\n      </div>\n    '])),this.onCreateUser.bind(this))}get nameInput(){return this.renderRoot.querySelector("input[name=name]")}get emailInput(){return this.renderRoot.querySelector("input[name=email]")}onCreateUser(){var e,n=this;return(e=function*(){try{if(!n.emailInput.checkValidity())throw new Error(s.a.t("error.not valid pattern of type",{type:"e-mail"}));if(!n.nameInput.value)throw new Error(s.a.t("error.value is empty",{value:"name"}));var e={name:n.nameInput.value.trim(),email:n.emailInput.value.trim()};yield n.dispatchEvent(new CustomEvent("create-user",{detail:e})),n.nameInput.value="",n.emailInput.value=""}catch(e){document.dispatchEvent(new CustomEvent("notify",{detail:{level:"error",message:e.message}}))}},function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){oe(i,r,a,o,s,"next",e)}function s(e){oe(i,r,a,o,s,"throw",e)}o(void 0)}))})()}}function de(e,n,t,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,a)}function ce(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function o(e){de(i,r,a,o,s,"next",e)}function s(e){de(i,r,a,o,s,"throw",e)}o(void 0)}))}}function ue(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}window.customElements.define("create-user",le);var me="user";class pe extends o.PageView{static get styles(){return[Object(c.b)(D||(D=ue(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          background-color: var(--main-section-background-color);\n          padding: var(--padding-wide);\n          overflow: auto;\n        }\n        h2 {\n          margin: var(--title-margin);\n          font: var(--title-font);\n          color: var(--title-text-color);\n        }\n        @media screen and (max-width: 600px) {\n          :host {\n            padding: var(--padding-narrow);\n          }\n          h2 {\n            margin: var(--margin-narrow) var(--margin-default) 0 var(--margin-default);\n          }\n        }\n      "])))]}static get properties(){return{domainUsers:Array,owner:Object,currentTab:String,passwordResettable:Boolean,userCreatable:Boolean}}get context(){return{title:"users management",help:"auth/users"}}get userListElement(){return this.renderRoot.querySelector("#user-list")}render(){var e=this,n=(this.domainUsers||[]).reduce((e,n)=>{var t=n.userType;return e[t]||(e[t]=[]),n.activated="inactive"!==n.status,e[t].push(n),e},{user:[],application:[],appliance:[]});return Object(c.e)(K||(K=ue(["\n      <h2>users</h2>\n\n      ",'\n      <quick-find-list\n        id="user-list"\n        .data="','"\n        @tabChanged="','"\n        .headerRenderer=','\n        .contentRenderer="','"\n      ></quick-find-list>\n\n      ',"\n    "])),this.userCreatable?Object(c.e)(F||(F=ue(["<create-user\n            @create-user=","\n          ></create-user>"])),function(){var n=ce((function*(n){var t=n.detail;t.userType="user",(yield o.client.mutate({mutation:d()(N||(N=ue(["\n                  mutation createUser($user: NewUser!) {\n                    createUser(user: $user) {\n                      name\n                    }\n                  }\n                "]))),variables:{user:t},context:Object(o.gqlContext)()})).errors||(yield Object(o.CustomAlert)({title:s.a.t("text.completed"),confirmButton:{text:s.a.t("button.confirm")}}),e.users=yield e.refreshUsers())}));return function(e){return n.apply(this,arguments)}}()):"",n,e=>this.currentTab=e.detail.currentTabKey,e=>Object(c.e)(H||(H=ue(["\n            ","\n          "])),e.activated?Object(c.e)(V||(V=ue([" "," "," "])),e.owner?Object(c.e)(J||(J=ue([" <mwc-icon>supervisor_account</mwc-icon> "]))):"",e.name):Object(c.e)(L||(L=ue(["\n                  <mwc-icon>do_disturb</mwc-icon>\n                  ","\n                "])),e.name)),e=>Object(c.e)(Q||(Q=ue(["<user-role-editor\n            .user=","\n            .domainOwner=","\n            .activate=",'\n            @userUpdated="','"\n            @ownershipTransferred="','"\n            .passwordResettable=',"\n          ></user-role-editor>"])),e,this.owner,e.activated,this.refreshUsers.bind(this),this.refreshUsers.bind(this),this.passwordResettable),this.currentTab===me?Object(c.e)(G||(G=ue(['<invite-user @invitationCompleted="','"></invite-user>'])),this.refreshUsers.bind(this)):"")}pageUpdated(e,n,t){var r=this;return ce((function*(){r.active&&(r.refreshUsers(),r.checkPasswordResettable(),r.checkUserCreatable())}))()}refreshUsers(){var e=this;return ce((function*(){var n,t,r=yield o.client.query({query:d()(M||(M=ue(["\n        query {\n          users {\n            items {\n              id\n              name\n              email\n              userType\n              status\n              owner\n            }\n          }\n        }\n      "]))),context:Object(o.gqlContext)()});null!==(n=r.errors)&&void 0!==n&&n.length||(e.domainUsers=r.data.users.items||[],e.owner=e.domainUsers.filter(e=>e.owner)[0]||{},null===(t=e.userListElement)||void 0===t||t.close())}))()}checkPasswordResettable(){var e=this;return ce((function*(){var n=yield o.client.query({query:d()(W||(W=ue(["\n        query {\n          checkResettablePasswordToDefault\n        }\n      "])))});n.errors||(e.passwordResettable=n.data.checkResettablePasswordToDefault)}))()}checkUserCreatable(){var e=this;return ce((function*(){var n=yield o.client.query({query:d()(X||(X=ue(["\n        query {\n          checkDefaultPassword\n        }\n      "])))});n.errors||(e.userCreatable=n.data.checkDefaultPassword)}))()}}window.customElements.define("user-management",pe)},966:function(e,n,t){"use strict";var r,a,i,o,s,l,d,c,u,m,p,v,b=t(81),h=t(1);function f(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}class g extends h.a{static get styles(){return[Object(h.b)(r||(r=f(["\n        .tabs {\n          display: flex;\n        }\n        .tab {\n          background-color: var(--secondary-background-color);\n          margin-top: var(--margin-default);\n          padding: var(--padding-narrow) var(--padding-wide) 0 var(--padding-wide);\n          border-radius: 9px 9px 0 0;\n          border-right: 1px solid rgba(0, 0, 0, 0.4);\n          text-transform: capitalize;\n          color: var(--theme-white-color);\n          opacity: 0.7;\n          cursor: pointer;\n        }\n        .tab[activate] {\n          background-color: var(--primary-color);\n          box-shadow: 2px -2px 2px 0px rgba(0, 0, 0, 0.15);\n          opacity: 1;\n          font-weight: bold;\n        }\n        .tab span,\n        .tab span[activate] {\n          font-weight: normal;\n          font-size: var(--fontsize-default);\n        }\n        .nav-bar {\n          background-color: var(--theme-white-color);\n          border: 1px solid var(--primary-color);\n          border-radius: 0 var(--border-radius) var(--border-radius) var(--border-radius);\n          margin: 0 0 var(--margin-wide) 0;\n          padding: var(--padding-narrow);\n          transition: opacity ease-in-out 0.3s;\n          opacity: 100%;\n          color: var(--secondary-color);\n          font-size: var(--fontsize-default);\n        }\n        .nav-bar[scrolling] {\n          opacity: 100%;\n          transition: opacity ease-in-out 0.3s;\n        }\n        .nav-bar * {\n          vertical-align: middle;\n        }\n        mwc-icon {\n          --mdc-icon-size: 14px;\n          padding-left: var(--padding-narrow);\n          position: relative;\n          margin-top: -2px;\n        }\n        .nav-bar span {\n          border-right: var(--border-dark-color);\n          border-width: 0 1px;\n          padding: 0 var(--padding-default) 0 var(--padding-narrow);\n          opacity: 0.8;\n          color: var(--secondary-color);\n          font-size: var(--fontsize-small);\n        }\n        .nav-bar span[activate] {\n          font-weight: bold;\n          cursor: pointer;\n          color: var(--secondary-text-color);\n          font-size: var(--fontsize-default);\n        }\n        @media screen and (max-width: 480px) {\n          :host {\n            width: 25px;\n          }\n          .tab {\n            display: flex;\n            flex-direction: column;\n            margin-top: var(--margin-narrow);\n            padding: var(--padding-narrow) var(--padding-default);\n            text-align: center;\n          }\n          .tab span,\n          .tab span[activate] {\n            font-size: var(--fontsize-default);\n            margin-top: -4px;\n          }\n          label,\n          mwc-icon {\n            display: none;\n          }\n          .nav-bar {\n            position: absolute;\n            right: 25px;\n            z-index: 100;\n\n            background-color: rgba(var(--primary-color-rgb), 0.2);\n            border: none;\n            border-radius: 15px;\n            margin-top: initial;\n            padding: var(--padding-narrow) 0;\n            opacity: 0%;\n            text-align: center;\n          }\n          .nav-bar span {\n            display: block;\n            border: none;\n            margin: auto;\n            padding: 2px var(--padding-narrow) 0 var(--padding-narrow);\n            font-size: 12px;\n          }\n        }\n      "])))]}static get properties(){return{scrolling:Boolean,indexes:Array,activeIndexes:Array,data:Object,currentTabKey:String,scrollable:Boolean}}constructor(){super(),this.indexes=[...Array(26).fill(65).map((e,n)=>String.fromCharCode(e+=n)),"#"]}render(){var e=Boolean(this.scrolling),n=this.activeIndexes||[],t=this.data||{},r=Object.keys(t),d=this.currentTabKey||r[0],c=this.scrollable;return Object(h.e)(a||(a=f(["\n      ","\n      ","\n    "])),r.length>1?Object(h.e)(i||(i=f(['\n            <div class="tabs">\n              ',"\n            </div>\n          "])),Object.keys(t).map(e=>{var n=t[e];return Object(h.e)(o||(o=f(['\n                  <div class="tab" ?activate="','" @click="','">\n                    ',"<span>(",")</span>\n                  </div>\n                "])),e===d,()=>this.currentTabKey=e,e,n.length)})):"",c?Object(h.e)(s||(s=f(['\n            <div class="nav-bar" ?scrolling=',">\n              <mwc-icon>anchor</mwc-icon> <label>Quick Find : </label>\n              ","\n            </div>\n          "])),e,this.indexes.map(e=>{var t=n.indexOf(e)>=0;return Object(h.e)(l||(l=f(['\n                  <span\n                    ?activate="','"\n                    class="nav-cursor"\n                    @click=',"\n                    >","</span\n                  >\n                "])),t,n=>{t&&this.onclickNavCursor(e)},e)})):"")}updated(e){e.has("currentTabKey")&&this.dispatchEvent(new CustomEvent("tabChanged",{detail:{currentTabKey:this.currentTabKey},bubbles:!0,composed:!0,cancelable:!0}))}onclickNavCursor(e){this.dispatchEvent(new CustomEvent("navigateTo",{detail:e,composed:!0}))}}function x(e,n,t,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,a)}function w(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}customElements.define("quick-find-navigator",g);class y extends h.a{static get styles(){return[b.c,Object(h.b)(d||(d=w(["\n        :host {\n          display: flex;\n          flex: 1;\n          flex-direction: column;\n          overflow: hidden;\n          max-width: var(--content-container-max-width);\n        }\n        .list-container {\n          flex: 1;\n\n          display: flex;\n          flex-direction: column;\n          background-color: var(--theme-white-color);\n          border-radius: 0 var(--border-radius) var(--border-radius) var(--border-radius);\n          border: var(--border-dark-color);\n          border-width: 0 1px 1px 1px;\n          box-shadow: var(--box-shadow);\n          overflow: auto;\n        }\n        ul {\n          margin: 0;\n          padding: 0;\n          flex: 1;\n          list-style: none;\n        }\n        li {\n          border-bottom: var(--border-dark-color);\n          margin-bottom: -1px;\n          color: var(--secondary-color);\n        }\n        li:nth-child(even) {\n          background-color: rgba(0, 0, 0, 0.025);\n        }\n        li:hover {\n          background-color: rgba(var(--primary-color-rgb), 0.2);\n        }\n        li div {\n          font: bold 16px var(--theme-font);\n        }\n        li div.header {\n          padding: var(--padding-default) var(--padding-wide);\n        }\n        [opened] {\n          border-left: 4px solid var(--google-green-300);\n          border-bottom: 3px solid rgba(0, 0, 0, 0.1);\n        }\n        [opened] .header {\n          background-color: var(--primary-color);\n          box-shadow: var(--box-shadow);\n          color: var(--theme-white-color);\n        }\n        [opened] .header::after {\n          display: block;\n          margin-bottom: -16px;\n          position: relative;\n          margin-top: 9px;\n          content: '';\n          width: 0px;\n          height: 0px;\n          border-left: 7px solid transparent;\n          border-right: 7px solid transparent;\n          border-top: 7px solid var(--primary-color);\n        }\n        li span {\n          display: block;\n          opacity: 0.9;\n          font: normal 14px/18px var(--theme-font);\n        }\n        .header mwc-icon {\n          --mdc-icon-size: var(--fontsize-default);\n          margin-right: var(--padding-narrow);\n        }\n        @media screen and (max-width: 480px) {\n          .list-container {\n            border-radius: 0 var(--border-radius) var(--border-radius) var(--border-radius);\n            border-width: 0 1px 1px 1px;\n          }\n        }\n      "])))]}static get properties(){return{data:Object,nameField:String,currentTabKey:String,list:Array,contentRenderer:Object,floatingDelay:Number,currentOpenedItemIdx:Number,scrollable:Boolean,headerRenderer:Function}}constructor(){super(),this.nameField="name",this.floatingDelay=1,this.headerRenderer=e=>Object(h.e)(c||(c=w(["","<span>","</span>"])),e.name,e.description)}render(){var e,n=this.nameField,t=this.data||{},r=this.currentTabKey||Object.keys(t)[0],a=this.data[r];a=this.sortByNameField(a);var i=this.currentOpenedItemIdx,o=this.computeActiveIndexes(a,n),s=this.scrollable;return Object(h.e)(u||(u=w(['\n      <quick-find-navigator\n        @navigateTo="','"\n        .currentTabKey="','"\n        .data="','"\n        .activeIndexes="','"\n        @tabChanged="','"\n        .scrollable="','"\n      ></quick-find-navigator>\n\n      <div class="list-container" @scroll=',">\n        <ul>\n          ","\n        </ul>\n      </div>\n    "])),this.navigateTo,r,t,o,e=>{this.currentOpenedItemIdx=null,this.currentTabKey=e.detail.currentTabKey},s,this.onscroll.bind(this),null!==(e=a)&&void 0!==e&&e.length?Object(h.e)(m||(m=w(["\n                ","\n              "])),a.map((e,n)=>{var t=i===n;return Object(h.e)(p||(p=w(['\n                    <li\n                      class="list-item"\n                      ?opened="','"\n                      .item="','"\n                      @click="','"\n                    >\n                      <div class="header">\n                        ',"\n                      </div>\n\n                      ","\n                    </li>\n                  "])),t,e,()=>{this.currentOpenedItemIdx===n?this.currentOpenedItemIdx=-1:this.currentOpenedItemIdx=n},t&&"function"==typeof this.openHeaderRenderer?this.openHeaderRenderer(e):this.headerRenderer(e),t&&"function"==typeof this.contentRenderer?Object(h.e)(v||(v=w(['<div @click="','">\n                            ',"\n                          </div>"])),e=>e.stopPropagation(),this.contentRenderer(e,this.currentTabKey)):"")})):"")}get listItems(){return Array.from(this.renderRoot.querySelectorAll(".list-container li.list-item"))}updated(e){var n,t=this;return(n=function*(){(e.has("data")||e.has("currentTabKey"))&&(yield t.updateComplete,t.scrollable=t.computeScrollable())},function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function o(e){x(i,r,a,o,s,"next",e)}function s(e){x(i,r,a,o,s,"throw",e)}o(void 0)}))})()}get quickFindNavigator(){return this.renderRoot.querySelector("quick-find-navigator")}computeActiveIndexes(e,n){return Array.from(new Set(e.map(e=>e[n][0].toUpperCase())))}computeScrollable(){var e=this.renderRoot.querySelector("ul");return e.clientHeight<e.scrollHeight}navigateTo(e){var n=this.nameField,t=e.detail.toLowerCase(),r=this.sortByNameField(this.data[this.currentTabKey]).findIndex(e=>0===e[n].toLowerCase().indexOf(t)),a=this.renderRoot.querySelector("ul :nth-child(".concat(r+1,")"));null==a||a.scrollIntoView()}onscroll(){this.quickFindNavigator.scrolling||(this.quickFindNavigator.scrolling=!0),null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.quickFindNavigator.scrolling=!1},1e3*this.floatingDelay)}sortByNameField(e){var n=this.nameField;return e.sort((e,t)=>e[n]>t[n]?1:e[n]<t[n]?-1:0)}close(){this.currentOpenedItemIdx=-1}openByKey(e,n="id"){this.currentOpenedItemIdx=this.listItems.findIndex(t=>t.item[n]===e)}}customElements.define("quick-find-list",y)}}]);