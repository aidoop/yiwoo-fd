(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1213:function(n,e,t){"use strict";t.r(e);var i,a,r,o,l,d=t(1),c=t(140),p=t.n(c),u=t(963),s=t.n(u),v=t(74),b=t(38);function f(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function m(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?f(Object(t),!0).forEach((function(e){g(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function g(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function h(n,e,t,i,a,r,o){try{var l=n[r](o),d=l.value}catch(n){return void t(n)}l.done?e(d):Promise.resolve(d).then(i,a)}function y(n){return function(){var e=this,t=arguments;return new Promise((function(i,a){var r=n.apply(e,t);function o(n){h(r,i,a,o,l,"next",n)}function l(n){h(r,i,a,o,l,"throw",n)}o(void 0)}))}}function w(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class x extends(Object(v.a)(b.store)(b.PageView)){static get styles(){return[Object(d.b)(i||(i=w(["\n        :host {\n          display: flex;\n          flex-direction: column;\n          overflow-y: auto;\n          position: relative;\n\n          background-color: var(--main-section-background-color);\n          padding: var(--padding-wide);\n        }\n        h2 {\n          margin: var(--title-margin);\n          font: var(--title-font);\n          color: var(--title-text-color);\n        }\n        [page-description] {\n          margin: var(--page-description-margin);\n          font: var(--page-description-font);\n          color: var(--page-description-color);\n        }\n        [icon] {\n          position: absolute;\n          top: 10px;\n          right: 10px;\n          max-width: 80px;\n        }\n        [icon] img {\n          max-width: 100%;\n          max-height: 100%;\n        }\n        label {\n          font: var(--label-font);\n          color: var(--label-color);\n          text-transform: var(--label-text-transform);\n        }\n        input {\n          border: var(--border-dark-color);\n          border-radius: var(--border-radius);\n          margin: var(--input-margin);\n          padding: var(--input-padding);\n          font: var(--input-font);\n\n          flex: 1;\n        }\n        select:focus,\n        input:focus,\n        button {\n          outline: none;\n        }\n        form {\n          max-width: var(--content-container-max-width);\n        }\n        [fieldset-container] {\n          background-color: var(--theme-white-color);\n          margin: var(--margin-wide) 0 var(--margin-default) 0;\n          padding: var(--padding-default);\n          border-radius: var(--border-radius);\n          box-shadow: var(--box-shadow);\n        }\n        [fieldset-container] fieldset {\n          margin: 0;\n          margin-top: -15px;\n        }\n        fieldset {\n          border-radius: var(--border-radius);\n          border: var(--border-dark-color);\n          margin: var(--fieldset-margin);\n          padding: var(--fieldset-padding);\n        }\n        legend {\n          padding: var(--legend-padding);\n          font-weight: bold;\n          color: var(--legend-color);\n        }\n        [field-2column] {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          grid-gap: 15px;\n        }\n        [field] {\n          display: flex;\n          flex-direction: column;\n          position: relative;\n        }\n        [grid-span] {\n          grid-column: span 2;\n        }\n        [button-in-field] {\n          position: absolute;\n          top: 24px;\n          right: 4px;\n        }\n        [input-hint] {\n          font: var(--input-hint-font);\n          color: var(--input-hint-color);\n        }\n        [danger] {\n          --mdc-theme-primary: var(--mdc-danger-button-primary-color);\n        }\n        .button-container {\n          margin-top: var(--margin-wide);\n          text-align: right;\n        }\n        .button-container mwc-button {\n          margin-left: var(--margin-narrow);\n        }\n        @media screen and (max-width: 480px) {\n          [field] {\n            grid-column: span 2;\n          }\n        }\n      "])))]}static get properties(){return{application:Object}}get context(){return{title:{icon:"apps",text:this.application.name}}}render(){var n=this.application||{};return Object(d.e)(a||(a=w(["\n      <div>\n        <h2><mwc-icon>apps</mwc-icon>&nbsp;","</h2>\n        <p page-description>","</p>\n      </div>\n\n      <div icon>\n        <img src=",' />\n      </div>\n\n      <form>\n        <div fieldset-container>\n          <fieldset>\n            <legend>application</legend>\n            <div field-2column>\n              <div field grid-span>\n                <label for="name">app name</label>\n                <input id="name" type="text" name="name" .value=',' />\n              </div>\n\n              <div field grid-span>\n                <label for="description">description</label>\n                <input id="description" type="text" name="description" .value=',' />\n              </div>\n\n              <div field grid-span>\n                <label for="email">contact email</label>\n                <input id="email" type="text" name="email" .value=',' />\n              </div>\n\n              <div field grid-span>\n                <label for="url">application URL</label>\n                <input id="url" type="text" name="url" .value=',' />\n              </div>\n\n              <div field grid-span>\n                <label for="icon">icon</label>\n                <input id="icon" type="text" name="icon" .value=',' />\n              </div>\n\n              <div field grid-span>\n                <label for="redirect-url">redirect URL</label>\n                <input id="redirect-url" type="text" name="redirectUrl" .value=',' />\n              </div>\n\n              <div field grid-span>\n                <label for="webhook">webhook</label>\n                <input id="webhook" type="text" name="webhook" .value=',' />\n              </div>\n\n              <div field grid-span>\n                <label for="available-scopes">available-scopes</label>\n                <input id="available-scopes" type="text" .value=',' readonly />\n              </div>\n\n              <div field grid-span>\n                <label for="auth-url">auth URL</label>\n                <input id="auth-url" type="text" .value='," readonly />\n                <mwc-button\n                  dense\n                  unelevated\n                  button-in-field\n                  clipboard-copy\n                  @click=",'\n                  label="copy"\n                ></mwc-button>\n                The endpoint for authorization server. This is used to get the authorization code.\n              </div>\n\n              <div field grid-span>\n                <label for="access-token-url">access token URL</label>\n                <input id="access-token-url" type="text" .value='," readonly />\n                <mwc-button\n                  dense\n                  unelevated\n                  button-in-field\n                  clipboard-copy\n                  @click=",'\n                  label="copy"\n                ></mwc-button>\n                The endpoint for authentication server. This is used to exchange the authorization code for an access\n                token.\n              </div>\n            </div>\n          </fieldset>\n        </div>\n\n        <div fieldset-container>\n          <fieldset>\n            <legend>credentials</legend>\n            <div field-2column>\n              <div field grid-span>\n                <label for="app-key">appKey</label>\n                <input id="app-key" type="text" .value='," readonly />\n                <mwc-button\n                  dense\n                  unelevated\n                  button-in-field\n                  clipboard-copy\n                  @click=",'\n                  label="copy"\n                ></mwc-button>\n              </div>\n\n              <div field grid-span>\n                <label for="app-secret">appSecret</label>\n                <input id="app-secret" type="text" .value='," readonly />\n                <mwc-button\n                  dense\n                  unelevated\n                  button-in-field\n                  clipboard-copy\n                  @click=",'\n                  label="copy"\n                ></mwc-button>\n              </div>\n            </div>\n          </fieldset>\n        </div>\n\n        <div class="button-container">\n          <mwc-button raised danger label="delete this app" @click=','></mwc-button>\n          <mwc-button raised label="update" @click=','></mwc-button>\n          <mwc-button outlined label="generate new secret"></mwc-button>\n        </div>\n      </form>\n    '])),n.name,n.description,n.icon,n.name,n.description,n.email,n.url,n.icon,n.redirectUrl,n.webhook,n.availableScopes,"".concat(location.origin).concat(n.authUrl),n=>n.preventDefault(),"".concat(location.origin).concat(n.accessTokenUrl),n=>n.preventDefault(),n.appKey,n=>n.preventDefault(),n.appSecret,n=>n.preventDefault(),this.deleteApplication.bind(this),this.updateApplication.bind(this))}firstUpdated(){var n=this.renderRoot.querySelectorAll("[clipboard-copy]");this.clipboard=new s.a(n,{target:n=>n.parentElement.querySelector("input")})}pageUpdated(n,e,t){var i=this;return y((function*(){i.active&&(yield i.fetchApplication())}))()}fetchApplication(){var n=this;return y((function*(){var e=yield b.client.query({query:p()(r||(r=w(["\n        query($id: String!) {\n          application(id: $id) {\n            id\n            name\n            description\n            email\n            url\n            icon\n            redirectUrl\n            authUrl\n            accessTokenUrl\n            webhook\n            availableScopes\n            appKey\n            appSecret\n          }\n        }\n      "]))),variables:{id:n.lifecycle.resourceId}});n.application=e.data.application}))()}updateApplication(n){var e=this;return y((function*(){n.preventDefault();var t=e.renderRoot.querySelector("form"),i=new FormData(t),a=Array.from(i.entries()).reduce((n,[e,t])=>(n[e]=t,n),{}),r=e.lifecycle.resourceId,l=yield b.client.mutate({mutation:p()(o||(o=w(["\n        mutation($id: String!, $patch: ApplicationPatch!) {\n          updateApplication(id: $id, patch: $patch) {\n            id\n            name\n            description\n            email\n            url\n            icon\n            redirectUrl\n            webhook\n            appKey\n            appSecret\n          }\n        }\n      "]))),variables:{id:r,patch:a}});l.errors?console.error("update fail"):(e.application=m(m({},e.application),l.data.updateApplication),console.log("update sucess"))}))()}deleteApplication(n){var e=this;return y((function*(){n.preventDefault();var t=e.lifecycle.resourceId;(yield b.client.mutate({mutation:p()(l||(l=w(["\n        mutation($id: String!) {\n          deleteApplication(id: $id)\n        }\n      "]))),variables:{id:t}})).data.deleteApplication?(console.log("delete sucess"),Object(b.navigate)("applications")):console.error("delete fail")}))()}}window.customElements.define("application-page",x)}}]);